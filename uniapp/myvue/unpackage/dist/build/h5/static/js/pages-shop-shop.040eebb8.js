(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-shop"],{"0b22":function(t,i,e){"use strict";e.r(i);var a=e("f872"),n=e("3d9d");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("514d");var o=e("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"34d6d960",null);i["default"]=c.exports},"3d9d":function(t,i,e){"use strict";e.r(i);var a=e("d509"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);i["default"]=n.a},"514d":function(t,i,e){"use strict";var a=e("cca7"),n=e.n(a);n.a},"9c1e":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'.fixed[data-v-34d6d960]{position:fixed;z-index:99}.VerticalNav.nav[data-v-34d6d960]{width:%?200?%;white-space:normal}.VerticalNav.nav .cu-item[data-v-34d6d960]{width:100%;text-align:center;background-color:#fff;margin:0;border:none;height:50px;position:relative}.VerticalNav.nav .cu-item.cur[data-v-34d6d960]{background-color:#f1f1f1}.VerticalNav.nav .cu-item.cur[data-v-34d6d960]:after{content:"";width:%?8?%;height:%?30?%;border-radius:%?10?% 0 0 %?10?%;position:absolute;background-color:currentColor;top:0;right:%?0?%;bottom:0;margin:auto}.VerticalBox[data-v-34d6d960]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.VerticalMain[data-v-34d6d960]{background-color:#f1f1f1;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}',""])},cca7:function(t,i,e){var a=e("9c1e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("5eea963b",a,!0,{sourceMap:!1,shadowMode:!1})},d509:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("7f7f");var a={data:function(){return{list:["零食","熬夜","非卖品"],tabCur:0,mainCur:0,verticalNavTop:0,load:!0,qqyun:getApp().globalData.qqyun,user:null,shop:null}},onLoad:function(){uni.showLoading({title:"加载中...",mask:!0})},onShow:function(){var t=this;uni.getStorage({key:"user",success:function(i){t.user=i.data}}),t.findshop()},onReady:function(){uni.hideLoading()},methods:{pay:function(t){if(null==this.user)uni.showModal({title:"提示",content:"请登录后再购买！",cancelText:"再看看",confirmText:"去登陆",success:function(t){t.confirm?uni.navigateTo({url:"../login/login"}):t.cancel}});else{var i=this;uni.showModal({cancelColor:"#ED1C24",cancelText:"没钱！",confirmColor:"#4CD964",confirmText:"不差钱！买！",title:"提示",content:"确定支付"+t.price+"球球币购买"+t.name+"吗？",success:function(e){e.confirm?(uni.showLoading({title:"支付中...",mask:!0}),uni.request({url:getApp().globalData.zuul+"shops/shop/pay",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",key:i.user.username,value:i.user.sessionid},data:{userid:i.user.id,shopid:t.id,name:t.name,price:t.price,image:t.image},success:function(t){uni.hideLoading(),1==t.data.status?(uni.showToast({title:"支付成功！请去订单查看",duration:2e3,icon:"none"}),i.findshop()):uni.showToast({title:"错误信息："+t.data.msg,duration:2e3,icon:"none"})},fail:function(){uni.hideLoading(),uni.showToast({title:"支付出错了！",duration:2e3,icon:"none"})}})):e.cancel}})}},findshop:function(){var t=this;uni.request({url:getApp().globalData.zuul+"shops/shop/findall",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{},success:function(i){t.shop=i.data.data},fail:function(){uni.showToast({title:"获取商品失败",duration:2e3,icon:"none"})}})},TabSelect:function(t){this.tabCur=t.currentTarget.dataset.id,this.mainCur=t.currentTarget.dataset.id,this.verticalNavTop=50*(t.currentTarget.dataset.id-1)},VerticalMain:function(t){var i=this,e=0;if(this.load){for(var a=function(t){var a=uni.createSelectorQuery().select("#main-"+i.list[t].id);a.fields({size:!0},function(a){i.list[t].top=e,e+=a.height,i.list[t].bottom=e}).exec()},n=0;n<this.list.length;n++)a(n);this.load=!1}var s=t.detail.scrollTop+10;for(n=0;n<this.list.length;n++)if(s>this.list[n].top&&s<this.list[n].bottom)return this.verticalNavTop=50*(this.list[n].id-1),this.tabCur=this.list[n].id,console.log(s),!1}}};i.default=a},f872:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-swiper",{staticClass:"screen-swiper round-dot",attrs:{"indicator-dots":!0,circular:!0,autoplay:!0,interval:"5000",duration:"500"}},t._l(2,function(i,a){return e("v-uni-swiper-item",{key:a},[e("v-uni-image",{attrs:{src:t.qqyun+"shop"+(a+1)+".jpg",mode:"aspectFill"}})],1)}),1),e("v-uni-view",{staticClass:"VerticalBox"},[e("v-uni-scroll-view",{staticClass:"VerticalNav nav",staticStyle:{height:"calc(100vh - 375upx)"},attrs:{"scroll-y":"","scroll-with-animation":"","scroll-top":t.verticalNavTop}},t._l(t.list,function(i,a){return e("v-uni-view",{key:a,staticClass:"cu-item",class:a==t.tabCur?"text-green cur":"",attrs:{"data-id":a},on:{click:function(i){i=t.$handleEvent(i),t.TabSelect(i)}}},[t._v(t._s(t.list[a]))])}),1),e("v-uni-scroll-view",{staticClass:"VerticalMain",staticStyle:{height:"calc(100vh - 375upx)"},attrs:{"scroll-y":"","scroll-with-animation":"","scroll-into-view":"main-"+t.mainCur},on:{scroll:function(i){i=t.$handleEvent(i),t.VerticalMain(i)}}},t._l(t.list,function(i,a){return e("v-uni-view",{key:a,staticClass:"padding-top padding-lr",attrs:{id:"main-"+a}},[e("v-uni-view",{staticClass:"cu-bar solid-bottom bg-white"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-text",{staticClass:"cuIcon-title text-green"}),t._v(t._s(t.list[a]))],1)],1),e("v-uni-view",{staticClass:"cu-list menu-avatar"},t._l(t.shop,function(i,n){return i.type==t.list[a]?e("v-uni-view",{key:n,staticClass:"cu-item"},[e("v-uni-view",{staticClass:"cu-avatar round lg",style:[{"background-Image":"url("+t.qqyun+i.image+")"}]}),e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(i.name))]),"非卖品"!=i.type?e("v-uni-view",{staticClass:"text-gray text-sm flex"},[e("v-uni-text",{staticClass:"text-cut"},[e("v-uni-text",{staticClass:" text-red  margin-right-xs"}),t._v("剩余:"+t._s(i.number))],1)],1):t._e()],1),e("v-uni-view",{staticClass:"action"},[e("v-uni-view",{staticClass:"text-grey text-xs",staticStyle:{"margin-left":"-20px"}},[e("v-uni-text",{staticClass:"cuIcon-moneybagfill text-red"},[t._v(t._s(i.price))])],1),e("v-uni-view",{staticClass:"margin-tb-sm text-center",staticStyle:{"margin-left":"-20px"}},["非卖品"!=i.type?e("v-uni-button",{staticClass:"cu-btn round bg-red shadow",staticStyle:{height:"20px",width:"60px"},on:{click:function(e){e=t.$handleEvent(e),t.pay(i)}}},[t._v("购买")]):t._e()],1)],1)],1):t._e()}),1)],1)}),1)],1)],1)},n=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return n})}}]);